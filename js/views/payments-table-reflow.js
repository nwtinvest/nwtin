define(["helpers"],function(t){return{apply:function(a,d){var e=this;d||$(document).on("platformChanged",function(){e.apply(a,!0)});var s=$(a),r=s.find("thead"),n=s.find("tbody");s.data("ths")||(s.data("ths",[]),r.find("th").each(function(t){"4"!=$(this).attr("colspan")&&s.data("ths").push($(this).text())})),s.data("trs")||s.data("trs",n.find("tr")),!s.data("rows")&&t.isMobile()&&(s.data("rows",[]),s.data("trs").each(function(t){var a=$(this),d=a.children("td");s.data("prev_row")&&!s.data("prev_row").is(".desc")&&s.data("rows").push($('<tr><td class="opener" colspan="2"><div class="arrow"></div><div class="opener_text">Подробнее</div></td></tr>')),d.each(function(t){var d=$(this);if($.trim(d.text())){var e;a.is(".desc")?(e=$("<tr />",{"class":"hided"}),e.append('<td colspan="2">'+d.html()+"</td>")):(e=$("<tr />"),e.append("<td>"+s.data("ths")[t]+"</td>"),e.append("<td>"+d.html()+"</td>")),s.data("rows").push(e)}}),s.data("prev_row",a)})),t.isMobile()?(r.hide(),n.empty().append(s.data("rows")),$(document).trigger("paymentsReflow")):(r.show(),n.empty().append(s.data("trs")),$(document).trigger("paymentsReflow"))}}});