define(["helpers"],function(e){var t,n,r;return{element:null,current:0,apply:function(r,a){var i=this;a||$(document).on("platformChanged",function(){i.apply(r,!0)}),t=$(r),n=t.children(".item"),n.eq(0).css("margin-left",0),t.length&&(a||(i.element=t),a||n.hover(function(e){$(this).addClass("expanded")},function(e){$(this).removeClass("expanded")}),e.isMobile()&&this.mobileInit(a))},mobileInit:function(a){var i=this,s=(t.width(),n.eq(0)),o=!1;i.current=0;var c;if(i.element.data("markers"))c=i.element.data("markers");else{c=$("<div/>",{"class":"markers"});for(var u=0;u<n.length;u++)c.append($("<span/>",{"class":"item"}));i.element.data("markers",c)}var l=$(".item",c);l.removeClass("current"),l.eq(0).addClass("current"),t.after(c),i.element.data("handlersExists")||(t[0].addEventListener("touchstart",function(n){e.isMobile()&&(r=n.touches[0].pageX,t[0].addEventListener("touchmove",i.touchMove,!1))},!1),t[0].addEventListener("touchend",function(e){t[0].removeEventListener("touchmove",i.touchMove,!1)},!1),t.on("swipe",function(e,r){return!o&&(t[0].removeEventListener("touchmove",i.touchMove,!1),o=!0,i.current=Math.min(n.length-1,Math.max(0,i.current-(r>0?1:-1))),s.animate({"margin-left":i.current*-100+"%"},300,function(){setTimeout(function(){o=!1},200)}),l.removeClass("current"),void l.eq(i.current).addClass("current"))}),i.element.data("handlersExists",!0))},touchMove:function(e){var n=e.touches[0].pageX-r;(n<-50||n>50)&&t.trigger("swipe",[n])}}});