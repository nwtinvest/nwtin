define(["input-slider","tabs","config","numeral","helpers"],function(e,a,t,l,r){return{cloneTable:null,apply:function(o,s){var n=this;s||$(document).on("platformChanged",function(){n.apply(o,!0)});var u=$(o),c=$('[data-role="courses-table"]',u);s||(n.cloneTable=c.clone().hide(),c.after(n.cloneTable)),r.isTablet()?n.cloneTable.show():n.cloneTable.hide();var i,d=$('[data-role="usd-buy"]',u),b=$('[data-role="usd-sale"]',u),m=$('[data-role="euro-buy"]',u),p=$('[data-role="euro-sale"]',u),f=$('[data-role="input-slider"]',u),h=$('[data-role="currency-selector"]',u),x=$('[data-role="current-currency"]',u),g=$('[data-role="action-selector"]',u),F=$('[data-role="result-sum"]',u),k=$('[data-role="banks-result-sum"]',u),y=$('[data-role="sum-diff"]',u),T=$('[data-role="convert-sum"]',u);s||e.apply(f),a.apply(h,{changePanels:!1,mobile:{swipePanels:!1,clickTabs:!0}}),a.apply(g,{changePanels:!1,mobile:{swipePanels:!1,clickTabs:!0}}),s||($.ajax({url:t.getConvertQuotesUrl,success:function(e){i=e.message,u.trigger("init")},error:function(e){console.log(e)},complete:function(){}}),u.on("init tab-change slider-change",function(e){var a=f.data("sum").toString().replace(" ",""),t=h.data("current-tab"),r=g.data("current-tab");if(i){var o=i[1*("usd"!=t)],s="sale"==r?"bid":"ask",n="sale"==r?-1:1,u=Number(o[s])+.1*n,c=o["bank_"+s],$={resultSum:Math.round(a*u),banksResultSum:Math.round(a*c)};x.html("usd"==t?"&#036;":"&#128;"),T.text(l(a).afFormat()),F.text(l($.resultSum).afFormat()),k.text(l($.banksResultSum).afFormat()),y.text(l(($.banksResultSum-$.resultSum)*("sale"==r?-1:1)).afFormat()),d.text(parseFloat(Number(i[0].ask)+.1).toFixed(3)),b.text(parseFloat(i[0].bid-.1).toFixed(3)),m.text(parseFloat(Number(i[1].ask)+.1).toFixed(3)),p.text(parseFloat(i[1].bid-.1).toFixed(3))}}))}}});