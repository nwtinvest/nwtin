define(["helpers"],function(e){var n=e.isTablet(),o=e.isMobile(),s=$(window),a=$(document),i=$(document.body);return s.resize(function(){n=e.isTablet(),o=e.isMobile()}),{reinit:function(){var e=$(".header__main__aside").find(".tablet-lk");n?e.show():e.hide()},apply:function(e){var l=this,t=$("#mainNav",e),d=$("#mainMenu",e),r=$("#openMenuBtn",e),c=$("#openSearchBtn",e),h=$("#closeMenuBtn",e),u=$("#searchField",e);a.on("platformChanged",function(){l.reinit()}),d.children("li").not(".lk").hover(function(){t.addClass("hover")},function(){t.removeClass("hover")}),d.children("li.lk").clone().addClass("tablet-lk")[n?"show":"hide"]().appendTo(".header__main__aside"),e.find(".sub").on("click",function(e){var n=$(this),o=n.hasClass("expanded");n.find("ul").each(function(){for(var e=0,s=n.find("li"),a=0,i=s.length;a<i;a++)e+=s.eq(a).outerHeight(!0),0===a&&(e*=2);n.css("max-height",o?"":e+"px")}),n.toggleClass("expanded")});var f=0,v=0,p=45,C=t.innerHeight(),m=t.attr("class")+"--fixed";s.on("scroll",function(){if(!n&&!o){if(v=s.scrollTop(),p>v)return t.removeClass(m),void t.removeClass(m+"-up");p+C<v&&t.addClass(m),f<v?t.removeClass(m+"-up"):t.addClass(m+"-up"),f=v}}),r.add(c).on("click",function(e){e.preventDefault();var n=$(this);n.closest("header").addClass("extended"),i.addClass("overflow").scrollTop(0),n.is("#openSearchBtn")&&u[0].focus()}),h.on("click",function(e){e.preventDefault(),$(this).closest("header").removeClass("extended"),i.removeClass("overflow").scrollTop(0)})}}});