define(["config"],function(t){var n,e=new PortfolioRepository(t.getPortfoliosUrl),o=e.init(function(){}).then(function(){var o=["EURUSD","USDRUR"],i=new CurrencyConversion(t.getQuotesUrl);return i.init(o,function(){var t=new BondController(e,i);n=t.getPortfolios()})});return{isInit:o,defaultSettings:!1,calculate:function(t,e){this.defaultSettings||(t=Math.max(t,(this.minAmountInvest()+this.maxAmountInvest())/2),this.defaultSettings=!0),$.each(n,function(n,o){o.setAmountInvest(t),o.changeCurrency(e),o.calculate()}),n.sort(function(t,n){return n.getPotentialIncome()-t.getPotentialIncome()})},getAmount:function(){return n[0].getAmountInvest()},getMostProfitablePortfolio:function(){var t=this.getPortfolios();return t[0]},getPortfolios:function(){return $.grep(n,function(t){return t.canBuy()})},maxAmountInvest:function(){return n[0].getMaxSumInvestment()},minAmountInvest:function(){var t=0;return $.each(n,function(n,e){t=0==n?e.getMinSumInvestment():Math.min(e.getMinSumInvestment(),t)}),t}}});